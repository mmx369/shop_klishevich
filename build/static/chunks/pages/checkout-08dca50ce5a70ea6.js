(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{44267:function(e,r,n){"use strict";n.d(r,{Z:function(){return f}});var t=n(87462),s=n(63366),a=n(67294),o=(n(45697),n(86010)),i=n(60713),c=n(40549),d=n(61239),l=n(68919);function u(e){return(0,l.Z)("MuiCardContent",e)}(0,n(86288).Z)("MuiCardContent",["root"]);var m=n(85893);const h=["className","component"],x=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}})));var f=a.forwardRef((function(e,r){const n=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:a,component:c="div"}=n,l=(0,s.Z)(n,h),f=(0,t.Z)({},n,{component:c}),p=(e=>{const{classes:r}=e;return(0,i.Z)({root:["root"]},u,r)})(f);return(0,m.jsx)(x,(0,t.Z)({as:c,className:(0,o.Z)(p.root,a),ownerState:f,ref:r},l))}))},66242:function(e,r,n){"use strict";n.d(r,{Z:function(){return p}});var t=n(87462),s=n(63366),a=n(67294),o=(n(45697),n(86010)),i=n(60713),c=n(40549),d=n(61239),l=n(55113),u=n(68919);function m(e){return(0,u.Z)("MuiCard",e)}(0,n(86288).Z)("MuiCard",["root"]);var h=n(85893);const x=["className","raised"],f=(0,c.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var p=a.forwardRef((function(e,r){const n=(0,d.Z)({props:e,name:"MuiCard"}),{className:a,raised:c=!1}=n,l=(0,s.Z)(n,x),u=(0,t.Z)({},n,{raised:c}),p=(e=>{const{classes:r}=e;return(0,i.Z)({root:["root"]},m,r)})(u);return(0,h.jsx)(f,(0,t.Z)({className:(0,o.Z)(p.root,a),elevation:c?8:void 0,ref:r,ownerState:u},l))}))},50103:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return R}});var t=n(16835),s=n(59874),a=n(73327),o=n(48633),i=n(50029),c=n(87794),d=n.n(c),l=n(15861),u=n(66242),m=n(44267),h=n(36822),x=n(53457),f=n(61903),p=n(83321),Z=n(9669),g=n.n(Z),j=n(82175),v=n(11163),N=n(67294),_=n(2497),w=n(72132),b=(n(64213),n(74231)),y=n(30557),B=n(91053),M=n(85893);w.Am.configure();var C=(0,s.Z)((function(){return(0,a.Z)({errorMsg:{color:"red",fontStyle:"italic",fontSize:"x-small"},btnWrapper:{display:"flex",justifyContent:"center"}})})),k={firstName:"",secondName:"",fatherName:"",zip:"",country:"\u0420\u043e\u0441\u0441\u0438\u044f",region:"",city:"",address:"",phone:"",comments:""};function P(){var e=(0,v.useRouter)(),r=C(),n=(0,_.I0)(),t=(0,_.v9)(B.nG.currentCart),s=(0,_.v9)(B.bc.shippingPrice);if((0,N.useEffect)((function(){n((0,y.i)(+window.localStorage.getItem("shippingPrice")))}),[]),!t||!s)return(0,M.jsx)("div",{children:(0,M.jsx)(l.Z,{variant:"subtitle2",children:"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a \u043f\u0443\u0441\u0442 \u0438\u043b\u0438 \u043d\u0435 \u0431\u044b\u043b \u0432\u044b\u0431\u0440\u0430\u043d \u0441\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437."})});var a=function(){var r=(0,i.Z)(d().mark((function r(n){var a,o;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={firstName:n.firstName,secondName:n.secondName,fatherName:n.fatherName,zip:n.zip,country:n.country,region:n.region,city:n.city,address:n.address,phone:n.phone,comments:n.comments,order:t,totalPrice:t.reduce((function(e,r){return e+r.priceOfGoods*r.amountOfGoods}),0),shippingPrice:s},r.prev=1,r.next=4,g().post("".concat("https://klishevich.ru","/api/addneworder"),a);case 4:return o=r.sent,window.localStorage.removeItem("cart"),window.localStorage.removeItem("shippingPrice"),w.Am.success("\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d",{position:w.Am.POSITION.TOP_LEFT,autoClose:3e3}),e.push("/orders/".concat(o.data.order._id)),r.abrupt("return",o);case 12:r.prev=12,r.t0=r.catch(1),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}(),o=function(){var e=(0,i.Z)(d().mark((function e(r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().post("".concat("https://klishevich.ru","/api/sendgrid"),{fullname:"".concat(r.firstName," ").concat(r.secondName," "),orderId:n});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.response?(console.log(e.t0.response.data),console.log(e.t0.response.status),console.log(e.t0.response.headers)):e.t0.request?console.log(e.t0.request):console.log("Error",e.t0.message),console.log(e.t0.config);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(u.Z,{"data-testid":"orderForm",children:(0,M.jsx)(m.Z,{children:(0,M.jsx)(j.J9,{validateOnMount:!0,initialValues:k,validationSchema:(0,b.Ry)({firstName:(0,b.Z_)().required("\u041f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").min(3,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(100,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),secondName:(0,b.Z_)().required("\u041f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").max(100,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),fatherName:(0,b.Z_)().max(100,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),zip:(0,b.Z_)().required("\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").max(10),country:(0,b.Z_)().required("\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").max(100),region:(0,b.Z_)().max(100),city:(0,b.Z_)().required("\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").max(100),address:(0,b.Z_)().required("\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").max(100),phone:(0,b.Z_)().matches(/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439").required("\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").min(10,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(15,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),comments:(0,b.Z_)().max(100,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),onSubmit:function(){var e=(0,i.Z)(d().mark((function e(r,n){var t,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.setSubmitting,e.next=3,a(r);case 3:return s=e.sent,console.log(t),e.next=7,o(r,null===s||void 0===s?void 0:s.data.order._id);case 7:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),children:function(e){var n=e.isSubmitting,t=e.isValid;return(0,M.jsxs)(j.l0,{children:[(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"secondName",as:f.Z,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),(0,M.jsx)(j.Bc,{name:"secondName",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"firstName",as:f.Z,label:"\u0418\u043c\u044f"}),(0,M.jsx)(j.Bc,{name:"firstName",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"fatherName",as:f.Z,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e(\u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438)"}),(0,M.jsx)(j.Bc,{name:"fatherName",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"zip",as:f.Z,label:"\u0418\u043d\u0434\u0435\u043a\u0441"}),(0,M.jsx)(j.Bc,{name:"zip",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"country",as:f.Z,label:"\u0421\u0442\u0440\u0430\u043d\u0430"}),(0,M.jsx)(j.Bc,{name:"country",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"region",as:f.Z,label:"\u0420\u0435\u0433\u0438\u043e\u043d(\u041e\u0431\u043b\u0430\u0441\u0442\u044c, \u043a\u0440\u0430\u0439)"}),(0,M.jsx)(j.Bc,{name:"region",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"city",as:f.Z,label:"\u0413\u043e\u0440\u043e\u0434"}),(0,M.jsx)(j.Bc,{name:"city",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"address",as:f.Z,label:"\u0410\u0434\u0440\u0435\u0441(\u0443\u043b\u0438\u0446\u0430, \u0434\u043e\u043c, \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430)"}),(0,M.jsx)(j.Bc,{name:"address",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"phone",as:f.Z,label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,M.jsx)(j.Bc,{name:"phone",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)(h.Z,{marginBottom:2,children:(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(j.gN,{name:"comments",as:f.Z,label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"}),(0,M.jsx)(j.Bc,{name:"comments",children:function(e){return(0,M.jsx)("div",{className:r.errorMsg,children:e})}})]})}),(0,M.jsx)("div",{className:r.btnWrapper,children:(0,M.jsx)(p.Z,{variant:"contained",color:"primary",type:"submit","data-testid":"checkoutBtn",disabled:n||!t,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435"})})]})}})})})})}var S=n(31612),q=(0,s.Z)((function(){return(0,a.Z)({root:{marginTop:"50px",maxWidth:"900px",marginLeft:"auto",marginRight:"auto"}})}));function R(){var e=q(),r=(0,o.kP)(),n=(0,t.Z)(r,2),s=n[0];return n[1]?null:s?(0,M.jsx)(S.Z,{title:"\u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430 | \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d | \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u0431\u0430\u043d\u043a\u043d\u043e\u0442 \u0438 \u043c\u043e\u043d\u0435\u0442",children:(0,M.jsx)("div",{className:e.root,children:(0,M.jsx)(P,{})})}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(S.Z,{title:"\u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430 | \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d | \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u0431\u0430\u043d\u043a\u043d\u043e\u0442 \u0438 \u043c\u043e\u043d\u0435\u0442",children:(0,M.jsx)("div",{className:e.root,"data-testid":"checkoutUnauthorizedPage",children:(0,M.jsx)("h3",{style:{textAlign:"center"},children:"\u0414\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."})})})})}},76377:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return n(50103)}])}},function(e){e.O(0,[504,89,138,490,986,612,774,888,179],(function(){return r=76377,e(e.s=r);var r}));var r=e.O();_N_E=r}]);