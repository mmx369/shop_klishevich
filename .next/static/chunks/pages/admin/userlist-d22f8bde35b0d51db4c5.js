(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{9067:function(e,n,r){"use strict";var i=r(5318),t=r(862);n.Z=void 0;var a=t(r(7294)),l=(0,i(r(2108)).default)(a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},7540:function(e,n,r){"use strict";r.d(n,{d:function(){return g}});var i=r(5893),t=r(7757),a=r.n(t),l=r(2137),s=r(7294),c=r(9669),o=r.n(c),d=r(1749),u=r(8286),h=r(6445),x=r(6394),m=r(8436),j=r(6479),p=r(282),f=r(9226),v=r(1163),Z=r(2132);r(6406);Z.Am.configure();var g=function(){var e=(0,v.useRouter)(),n=((0,f.I0)(),(0,s.useState)("")),r=n[0],t=n[1],c=(0,s.useState)(""),g=c[0],b=c[1],k=(0,s.useState)(""),N=k[0],y=k[1],w=function(){var n=(0,l.Z)(a().mark((function n(){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i={name:r,email:g,role:N},n.next=4,o().post("".concat("https://shop.klishevich.ru","/api/addnewuser"),i);case 4:Z.Am.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(r," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),{position:Z.Am.POSITION.TOP_LEFT,autoClose:5e3}),t(""),b(""),y(""),e.replace(e.asPath),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),Z.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(n.t0.response.data.message),{position:Z.Am.POSITION.TOP_LEFT,autoClose:5e3}),console.error(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}();return(0,i.jsx)(s.Fragment,{children:(0,i.jsx)("div",{children:(0,i.jsxs)(d.Z,{container:!0,direction:"column",children:[(0,i.jsx)(d.Z,{item:!0,children:(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"})})}),(0,i.jsx)("div",{children:(0,i.jsx)(d.Z,{item:!0,children:(0,i.jsx)(u.Z,{onChange:function(e){t(e.target.value)},margin:"normal",name:"name",value:r,type:"text",label:"\u0418\u043c\u044f",fullWidth:!0})})}),(0,i.jsx)("div",{children:(0,i.jsx)(d.Z,{item:!0,children:(0,i.jsx)(u.Z,{onChange:function(e){b(e.target.value)},margin:"normal",name:"email",value:g,type:"text",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0})})}),(0,i.jsx)(d.Z,{item:!0,children:(0,i.jsx)("div",{children:(0,i.jsxs)(h.Z,{fullWidth:!0,children:[(0,i.jsx)(x.Z,{id:"select-label",children:"role"}),(0,i.jsxs)(m.Z,{labelId:"select-label",value:N,onChange:function(e){y(e.target.value)},children:[(0,i.jsx)(j.Z,{value:"",children:(0,i.jsx)("em",{children:"None"})}),(0,i.jsx)(j.Z,{value:"admin",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),(0,i.jsx)(j.Z,{value:"client",children:"\u041a\u043b\u0438\u0435\u043d\u0442"})]})]})})}),(0,i.jsx)(d.Z,{item:!0,children:(0,i.jsx)(p.Z,{variant:"outlined",color:"secondary",onClick:w,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})})}},6013:function(e,n,r){"use strict";r.d(n,{Z:function(){return P}});var i=r(5893),t=r(7757),a=r.n(t),l=r(2137),s=r(7294),c=r(9008),o=r(1120),d=r(7623),u=r(5258),h=r(8358),x=r(2318),m=r(2613),j=r(7812),p=r(5629),f=r(5988),v=r(8633),Z=r(282),g=function(e){var n=e.isSignedIn;return(0,i.jsxs)("div",{className:"jsx-103564394",children:[!n&&(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(){(0,v.zB)()},children:"\u0412\u043e\u0439\u0442\u0438"}),n&&(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(){(0,v.w7)()},children:"\u0412\u044b\u0439\u0442\u0438"}),(0,i.jsx)(f.default,{id:"103564394",children:["div.jsx-103564394{margin:5px;}"]})]})},b=r(2669),k=r(1163),N=(0,o.Z)((function(){return(0,d.Z)({root:{flexGrow:1},link:{color:"white",textDecoration:"none"}})}));function y(e){e.currentUser;var n=e.currentEmail,r=(e.currentId,e.currentRole,e.isLoggedIn),t=e.isCartEmpty,a=N(),l=(0,k.useRouter)();return(0,i.jsx)(u.Z,{position:"static",children:(0,i.jsxs)(h.Z,{variant:"dense",className:a.root,children:[(0,i.jsx)(x.Z,{variant:"subtitle2",className:a.root,children:"\u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,i.jsx)(m.Z,{xsDown:!0,children:r===p.Y.True&&(0,i.jsxs)("div",{children:["\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a ",n]})}),!!t.length&&(0,i.jsx)("div",{children:(0,i.jsx)(j.Z,{color:"inherit",onClick:function(e){e.preventDefault(),l.push("/cart")},children:(0,i.jsx)(b.Z,{})})}),r!==p.Y.Unknown&&(0,i.jsx)(g,{isSignedIn:r===p.Y.True})]})})}var w=r(770),C=r(1664),E=r(9226),I=r(3023),S=r(2244),T=r(456),_=(0,o.Z)((function(e){return(0,d.Z)({text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},link:{textDecoration:"none"}})}));function O(){var e=_();return(0,i.jsx)(s.Fragment,{children:(0,i.jsx)(u.Z,{position:"fixed",color:"primary",className:e.appBar,children:(0,i.jsxs)(h.Z,{variant:"dense",children:[(0,i.jsx)(m.Z,{xsDown:!0,children:(0,i.jsx)(C.default,{href:"/",children:(0,i.jsx)("a",{className:e.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})})}),(0,i.jsx)(C.default,{href:"/paymentandshipping",children:(0,i.jsx)("a",{className:e.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})})}),(0,i.jsx)(C.default,{href:"/faq",children:(0,i.jsx)("a",{className:e.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u0432\u0435\u0442\u044b"})})}),(0,i.jsx)(C.default,{href:"/contacts",children:(0,i.jsx)("a",{className:e.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})})]})})})}var A=(0,o.Z)((function(){return(0,d.Z)({main:{margin:"15px"},footer:{margin:"15px",textAlign:"center"},link:{textDecoration:"none"},bread:{marginTop:"10px",marginLeft:"15px"}})}));function P(e){var n=e.children,r=e.title,t=A(),o=(0,E.I0)(),d=(0,E.v9)((function(e){return e.app.currentUser})),u=(0,E.v9)((function(e){return e.app.currentEmail})),h=(0,E.v9)((function(e){return e.app.currentId})),m=(0,E.v9)((function(e){return e.app.currentRole})),j=(0,E.v9)((function(e){return e.app.isLoggedIn}));s.useEffect((function(){j===p.Y.Unknown&&(0,l.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Gg)();case 2:(n=e.sent)?(o((0,I.lL)(p.Y.True)),o((0,I.bM)(n.user.name,n.user.email,n.databaseId,n.role))):(o((0,I.lL)(p.Y.False)),o((0,I.bM)(void 0,void 0,void 0,void 0)));case 4:case"end":return e.stop()}}),e)})))()}),[]),s.useEffect((function(){o((0,T.D3)())}),[o]);var f=(0,E.v9)((function(e){return e.cart}))||[];return(0,i.jsxs)("div",{children:[(0,i.jsxs)(c.default,{children:[(0,i.jsx)("title",{children:r}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,i.jsx)("meta",{charSet:"utf-8"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsxs)("header",{children:[(0,i.jsx)(y,{currentUser:d,currentEmail:u,currentId:h,currentRole:m,isLoggedIn:j,isCartEmpty:f}),(0,i.jsxs)(w.Z,{"aria-label":"breadcrumb",className:t.bread,children:[(0,i.jsx)(C.default,{href:"/",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})}),(0,i.jsx)(C.default,{href:"/paymentandshipping",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})})}),(0,i.jsx)(C.default,{href:"/faq",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"})})}),(0,i.jsx)(C.default,{href:"/contacts",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})}),m===S.S.Admin&&(0,i.jsx)(C.default,{href:"/admin",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)(x.Z,{color:"inherit",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})})})]})]}),(0,i.jsx)("main",{className:t.main,children:(0,i.jsx)("div",{style:{flexGrow:1},children:n})}),(0,i.jsxs)("footer",{className:t.footer,children:[(0,i.jsx)(O,{}),(0,i.jsx)(C.default,{href:"/",children:(0,i.jsx)("a",{className:t.link,children:(0,i.jsx)("b",{children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430"})})})]})]})}},1416:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return L},default:function(){return F}});var i=r(5893),t=r(8481),a=r(8633),l=r(7294),s=r(6013),c=r(2244),o=r(1749),d=r(282),u=r(6847),h=r(9895),x=r(2302),m=r(3750),j=r(7394),p=r(8222),f=r(9613),v=r(7812),Z=r(9067),g=r(1163),b=r(7757),k=r.n(b),N=r(2137),y=r(9669),w=r.n(y),C=r(8286),E=r(6445),I=r(6394),S=r(8436),T=r(6479),_=r(9226),O=r(2132),A=(r(6406),function(e){var n=e.id,r=e.email,t=e.updateUserList,a=e.changeVisibility,s=(0,g.useRouter)(),c=((0,_.I0)(),(0,l.useState)("")),u=c[0],h=c[1],x=(0,l.useState)(""),m=x[0],j=x[1],p=(0,l.useState)(""),f=p[0],v=p[1],Z=function(){var e=(0,N.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w().delete("".concat("https://shop.klishevich.ru","/api/deleteuser"),{data:n});case 3:O.Am.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",{position:O.Am.POSITION.TOP_LEFT,autoClose:5e3}),s.replace(s.asPath),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),O.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.t0.response.data.message),{position:O.Am.POSITION.TOP_LEFT,autoClose:5e3}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,N.Z)(k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={name:u,role:m,email:f,id:n},e.next=4,w().put("".concat("https://shop.klishevich.ru","/api/updateuser"),r);case 4:200===e.sent.status&&(O.Am.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(u," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b"),{position:O.Am.POSITION.TOP_LEFT,autoClose:5e3}),t(),h(""),j(""),v(""),a()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),O.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.t0.response.data.message),{position:O.Am.POSITION.TOP_LEFT,autoClose:5e3}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(l.Fragment,{children:(0,i.jsxs)(o.Z,{container:!0,spacing:2,direction:"column",children:[(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)("div",{children:(0,i.jsxs)("h3",{children:["\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",r]})})}),(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)(C.Z,{onChange:function(e){h(e.target.value)},margin:"normal",name:"name",value:u,type:"text",label:"\u0418\u043c\u044f",fullWidth:!0})})}),(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)(C.Z,{onChange:function(e){v(e.target.value)},margin:"normal",name:"email",value:f,type:"text",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0})})}),(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)("div",{children:(0,i.jsxs)(E.Z,{fullWidth:!0,children:[(0,i.jsx)(I.Z,{id:"select-label",children:"\u0420\u043e\u043b\u044c"}),(0,i.jsxs)(S.Z,{labelId:"select-label",value:m,onChange:function(e){j(e.target.value)},children:[(0,i.jsx)(T.Z,{value:"",children:(0,i.jsx)("em",{children:"None"})}),(0,i.jsx)(T.Z,{value:"admin",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),(0,i.jsx)(T.Z,{value:"client",children:"\u041a\u043b\u0438\u0435\u043d\u0442"})]})]})})}),(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)(d.Z,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:b,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})}),(0,i.jsx)(o.Z,{item:!0,children:(0,i.jsx)(d.Z,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:Z,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})]})})}),P=r(7540),L=!0;function F(e){var n=e.res,r=(0,g.useRouter)(),b=(0,a.kP)(),k=(0,t.Z)(b,2),N=k[0],y=k[1],w=(0,l.useState)(""),C=w[0],E=w[1],I=(0,l.useState)(""),S=I[0],T=I[1],_=(0,l.useState)(!1),O=_[0],L=_[1],F=(0,l.useState)(!1),W=F[0],Y=F[1],z=JSON.parse(n);if(console.log(z),y)return null;if(!N)return(0,i.jsxs)(s.Z,{title:"Admin profile",children:[(0,i.jsx)("h1",{children:"You must sign in"}),";"]});if(N.role!==c.S.Admin)return(0,i.jsxs)(s.Z,{title:"Admin profile",children:[(0,i.jsx)("h1",{children:"You must be an admin to see this page"}),";"]});var D=function(e,n){return function(){L(!0),Y(!1),E(e),T(n)}};return(0,i.jsx)(s.Z,{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 | \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)(o.Z,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(o.Z,{item:!0,children:!W&&(0,i.jsx)(d.Z,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:function(){Y(!0),console.log("add new user")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),(0,i.jsx)(o.Z,{item:!0,children:O&&!W&&(0,i.jsx)(A,{id:C,email:S,updateUserList:function(){r.replace(r.asPath)},changeVisibility:function(){L(!1)}})}),(0,i.jsx)(o.Z,{item:!0,children:W&&(0,i.jsx)(P.d,{})})]}),(0,i.jsx)(u.Z,{component:h.Z,children:(0,i.jsxs)(x.Z,{"aria-label":"simple table",children:[(0,i.jsx)(m.Z,{children:(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(p.Z,{children:"E-mail"}),(0,i.jsx)(p.Z,{align:"right",children:"\u0418\u043c\u044f"}),(0,i.jsx)(p.Z,{align:"right",children:"\u0420\u043e\u043b\u044c"}),(0,i.jsx)(p.Z,{align:"right",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),(0,i.jsx)(p.Z,{align:"right",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})}),(0,i.jsx)(f.Z,{children:z&&z.map((function(e){return(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(p.Z,{component:"th",scope:"row",children:e.email}),(0,i.jsx)(p.Z,{align:"right",children:e.name}),(0,i.jsx)(p.Z,{align:"right",children:e.role}),(0,i.jsx)(p.Z,{align:"right",children:e.orders.length>0?e.orders:"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),(0,i.jsx)(p.Z,{align:"right",children:(0,i.jsx)(v.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:D(e._id,e.email),children:(0,i.jsx)(Z.Z,{})})})]},e._id)}))})]})})]})})}},2244:function(e,n,r){"use strict";var i;r.d(n,{S:function(){return i}}),function(e){e.Admin="admin",e.Client="client"}(i||(i={}))},8013:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/userlist",function(){return r(1416)}])}},function(e){e.O(0,[65,619,799,537,436,188,569,534,774,888,179],(function(){return n=8013,e(e.s=n);var n}));var n=e.O();_N_E=n}]);