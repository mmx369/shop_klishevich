(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{6013:function(n,e,r){"use strict";r.d(e,{Z:function(){return z}});var i=r(5893),a=r(7757),t=r.n(a),s=r(2137),c=r(7294),l=r(9008),o=r(1120),d=r(7623),u=r(5258),h=r(8358),x=r(2318),j=r(2613),p=r(7812),f=r(5629),m=r(5988),v=r(8633),Z=r(282),g=function(n){var e=n.isSignedIn;return(0,i.jsxs)("div",{className:"jsx-103564394",children:[!e&&(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(){(0,v.zB)()},children:"\u0412\u043e\u0439\u0442\u0438"}),e&&(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(){(0,v.w7)()},children:"\u0412\u044b\u0439\u0442\u0438"}),(0,i.jsx)(m.default,{id:"103564394",children:["div.jsx-103564394{margin:5px;}"]})]})},b=r(2669),k=r(1163),N=(0,o.Z)((function(){return(0,d.Z)({root:{flexGrow:1},link:{color:"white",textDecoration:"none"}})}));function w(n){n.currentUser;var e=n.currentEmail,r=(n.currentId,n.currentRole,n.isLoggedIn),a=n.isCartEmpty,t=N(),s=(0,k.useRouter)();return(0,i.jsx)(u.Z,{position:"static",children:(0,i.jsxs)(h.Z,{variant:"dense",className:t.root,children:[(0,i.jsx)(x.Z,{variant:"subtitle2",className:t.root,children:"\u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,i.jsx)(j.Z,{xsDown:!0,children:r===f.Y.True&&(0,i.jsxs)("div",{children:["\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a ",e]})}),!!a.length&&(0,i.jsx)("div",{children:(0,i.jsx)(p.Z,{color:"inherit",onClick:function(n){n.preventDefault(),s.push("/cart")},children:(0,i.jsx)(b.Z,{})})}),r!==f.Y.Unknown&&(0,i.jsx)(g,{isSignedIn:r===f.Y.True})]})})}var y=r(770),E=r(1664),_=r(9226),C=r(3023),S=r(2244),I=r(456),D=(0,o.Z)((function(n){return(0,d.Z)({text:{padding:n.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:n.spacing(2)},subheader:{backgroundColor:n.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},link:{textDecoration:"none"}})}));function G(){var n=D();return(0,i.jsx)(c.Fragment,{children:(0,i.jsx)(u.Z,{position:"fixed",color:"primary",className:n.appBar,children:(0,i.jsxs)(h.Z,{variant:"dense",children:[(0,i.jsx)(j.Z,{xsDown:!0,children:(0,i.jsx)(E.default,{href:"/",children:(0,i.jsx)("a",{className:n.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})})}),(0,i.jsx)(E.default,{href:"/paymentandshipping",children:(0,i.jsx)("a",{className:n.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})})}),(0,i.jsx)(E.default,{href:"/faq",children:(0,i.jsx)("a",{className:n.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u0432\u0435\u0442\u044b"})})}),(0,i.jsx)(E.default,{href:"/contacts",children:(0,i.jsx)("a",{className:n.link,children:(0,i.jsx)(Z.Z,{color:"primary",variant:"contained",size:"small",disableElevation:!0,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})})]})})})}var O=(0,o.Z)((function(){return(0,d.Z)({main:{margin:"15px"},footer:{margin:"15px",textAlign:"center"},link:{textDecoration:"none"},bread:{marginTop:"10px",marginLeft:"15px"}})}));function z(n){var e=n.children,r=n.title,a=O(),o=(0,_.I0)(),d=(0,_.v9)((function(n){return n.app.currentUser})),u=(0,_.v9)((function(n){return n.app.currentEmail})),h=(0,_.v9)((function(n){return n.app.currentId})),j=(0,_.v9)((function(n){return n.app.currentRole})),p=(0,_.v9)((function(n){return n.app.isLoggedIn}));c.useEffect((function(){p===f.Y.Unknown&&(0,s.Z)(t().mark((function n(){var e;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,v.Gg)();case 2:(e=n.sent)?(o((0,C.lL)(f.Y.True)),o((0,C.bM)(e.user.name,e.user.email,e.databaseId,e.role))):(o((0,C.lL)(f.Y.False)),o((0,C.bM)(void 0,void 0,void 0,void 0)));case 4:case"end":return n.stop()}}),n)})))()}),[]),c.useEffect((function(){o((0,I.D3)())}),[o]);var m=(0,_.v9)((function(n){return n.cart}))||[];return(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.default,{children:[(0,i.jsx)("title",{children:r}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,i.jsx)("meta",{charSet:"utf-8"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsxs)("header",{children:[(0,i.jsx)(w,{currentUser:d,currentEmail:u,currentId:h,currentRole:j,isLoggedIn:p,isCartEmpty:m}),(0,i.jsxs)(y.Z,{"aria-label":"breadcrumb",className:a.bread,children:[(0,i.jsx)(E.default,{href:"/",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})})}),(0,i.jsx)(E.default,{href:"/paymentandshipping",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u041e\u043f\u043b\u0430\u0442\u0430 \u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})})}),(0,i.jsx)(E.default,{href:"/faq",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"})})}),(0,i.jsx)(E.default,{href:"/contacts",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)(x.Z,{color:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})}),j===S.S.Admin&&(0,i.jsx)(E.default,{href:"/admin",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)(x.Z,{color:"inherit",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})})})]})]}),(0,i.jsx)("main",{className:a.main,children:(0,i.jsx)("div",{style:{flexGrow:1},children:e})}),(0,i.jsxs)("footer",{className:a.footer,children:[(0,i.jsx)(G,{}),(0,i.jsx)(E.default,{href:"/",children:(0,i.jsx)("a",{className:a.link,children:(0,i.jsx)("b",{children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d. \u041d\u0443\u043c\u0438\u0437\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0431\u043e\u043d\u0438\u0441\u0442\u0438\u043a\u0430"})})})]})]})}},5789:function(n,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return L},default:function(){return T}});var i=r(5893),a=r(1120),t=r(7623),s=r(2318),c=r(9895),l=r(7294),o=r(6013),d=r(2302),u=r(9613),h=r(8222),x=r(6847),j=r(3750),p=r(7394),f=r(7757),m=r.n(f),v=r(2137),Z=r(8481),g=r(282),b=r(7804),k=r(6856),N=r(9525),w=r(6083),y=r(6394),E=r(8799),_=r(6445),C=r(8436),S=r(9669),I=r.n(S),D=r(1163),G=(0,a.Z)((function(n){return(0,t.Z)({container:{display:"flex",flexWrap:"wrap"},formControl:{margin:n.spacing(1),minWidth:120}})}));function O(n){var e=n.currStatus,r=n.currId,a=G(),t=(0,D.useRouter)(),s=l.useState(!1),c=(0,Z.Z)(s,2),o=c[0],d=c[1],u=l.useState(e),h=(0,Z.Z)(u,2),x=h[0],j=h[1],p=function(){d(!1),j(e)},f=function(){var n=(0,v.Z)(m().mark((function n(){var i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(x),i={id:r,status:x},n.next=4,I().put("".concat("https://shop.klishevich.ru","/api/changestatusorder"),i);case 4:n.sent,d(!1),j(e),t.reload();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,i.jsxs)("div",{children:[(0,i.jsx)(g.Z,{onClick:function(){d(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,i.jsxs)(b.Z,{open:o,onClose:p,children:[(0,i.jsx)(w.Z,{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,i.jsx)(N.Z,{children:(0,i.jsx)("form",{className:a.container,children:(0,i.jsxs)(_.Z,{className:a.formControl,children:[(0,i.jsx)(y.Z,{htmlFor:"order-status",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,i.jsxs)(C.Z,{native:!0,value:x,onChange:function(n){j(String(n.target.value)||"")},input:(0,i.jsx)(E.Z,{defaultValue:x}),children:[(0,i.jsx)("option",{"aria-label":"\u041d\u0435\u0442",value:""}),(0,i.jsx)("option",{value:"open",children:"\u041e\u0442\u043a\u0440\u044b\u0442"}),(0,i.jsx)("option",{value:"paid",children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"}),(0,i.jsx)("option",{value:"shipped",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"}),(0,i.jsx)("option",{value:"received",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d"}),(0,i.jsx)("option",{value:"closed",children:"\u0417\u0430\u043a\u0440\u044b\u0442"})]})]})})}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(g.Z,{onClick:p,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,i.jsx)(g.Z,{onClick:f,color:"primary",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})]})}var z=(0,a.Z)((function(n){return(0,t.Z)({paper:{padding:n.spacing(2),margin:"auto"},img:{width:"100%"},table:{minWidth:150}})})),L=!0;function T(n){var e,r=n.order,a=z(),t=JSON.parse(r),l=new Date(t.date).toLocaleDateString();return(0,i.jsx)("div",{children:(0,i.jsxs)(o.Z,{title:"",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(s.Z,{variant:"h6",children:["\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:",l]}),(0,i.jsxs)(s.Z,{variant:"h6",children:["\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441:"," ".concat((e=t.status,"open"===e?"\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043a\u0440\u044b\u0442":"paid"===e?"\u0417\u0430\u043a\u0430\u0437 \u043e\u043f\u043b\u0430\u0447\u0435\u043d":"shipped"===e?"\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d":"received"===e?"\u0417\u0430\u043a\u0430\u0437 \u043f\u043e\u043b\u0443\u0447\u0435\u043d":"closed"===e?"\u0417\u0430\u043a\u0430\u0437 \u0437\u0430\u043a\u0440\u044b\u0442":void 0))]}),(0,i.jsx)(O,{currStatus:t.status,currId:t._id}),(0,i.jsx)(s.Z,{variant:"h6",children:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:"}),(0,i.jsxs)("div",{style:{border:"solid 1px",padding:"5px"},children:[(0,i.jsx)(s.Z,{variant:"body2",children:"".concat(t.secondName," ").concat(t.firstName," ").concat(t.fatherName?t.fatherName:"")}),(0,i.jsx)(s.Z,{variant:"body2",children:"".concat(t.address)}),(0,i.jsx)(s.Z,{variant:"body2",children:"".concat(t.region?t.region:""," ").concat(t.city?t.city:"")}),(0,i.jsx)(s.Z,{variant:"body2",children:"".concat(t.zip)})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{variant:"h6",children:"\u0417\u0430\u043a\u0430\u0437:"}),(0,i.jsx)(x.Z,{component:c.Z,children:(0,i.jsxs)(d.Z,{className:a.table,size:"small","aria-label":"a dense table",children:[(0,i.jsx)(j.Z,{children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(h.Z,{children:"\u0422\u043e\u0432\u0430\u0440"}),(0,i.jsx)(h.Z,{align:"right",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,i.jsx)(h.Z,{align:"right",children:"\u0426\u0435\u043d\u0430"}),(0,i.jsx)(h.Z,{align:"right",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"})]})}),(0,i.jsx)(u.Z,{children:t.order.map((function(n){return(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(h.Z,{component:"th",scope:"row",children:n.nameOfGoods}),(0,i.jsx)(h.Z,{align:"right",children:n.amountOfGoods}),(0,i.jsx)(h.Z,{align:"right",children:n.priceOfGoods}),(0,i.jsx)(h.Z,{align:"right",children:n.priceOfGoods*n.amountOfGoods})]},n._id)}))})]})}),(0,i.jsxs)(s.Z,{variant:"subtitle2",children:["\u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",t.totalPrice," \u0440\u0443\u0431\u043b\u0435\u0439"]})]})]})})}},2244:function(n,e,r){"use strict";var i;r.d(e,{S:function(){return i}}),function(n){n.Admin="admin",n.Client="client"}(i||(i={}))},1189:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders/[id]",function(){return r(5789)}])}},function(n){n.O(0,[65,619,799,537,436,188,569,374,774,888,179],(function(){return e=1189,n(n.s=e);var e}));var e=n.O();_N_E=e}]);